<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>MathLex Simple Calculator</title>
        <meta name="viewport" content="width=device-width">
            <style>
        body { text-align: center; }
        #math-display, #math-output { border: 1px solid #000; margin: 5px 0;}
    </style>
            <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/js/vendor/jquery-2.0.0.min.js"><\/script>')</script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
        });
        </script>
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

            <h1>MathLex Sample</h1>
<h2>A Simple Calculator</h2>
<input type="text" id="math-input" placeholder="Type math here">
<div id="math-display">\[ \]</div>
<input type="button" id="send-math" class="small round button" value="Calculate">
<div id="math-output">\[ \]</div>

<script src="./mathlex-unknown.js"></script>

<script>
    $(document).ready(function () {
        // get MathJax output object
        var mjDisplayBox, mjOutBox;
        MathJax.Hub.Queue(function () {
            mjDisplayBox = MathJax.Hub.getAllJax('math-display')[0];
            mjOutBox = MathJax.Hub.getAllJax('math-output')[0];
        });

        // "live update" MathJax whenever a key is pressed
        $('#math-input').on('keyup', function (evt) {
            var math = $(this).val();
            console.log(math)
            $(this).css('color', 'black');
            if (math.length > 0) {
                try {
                    var tree = MathLex.parse(math),
                        latex = MathLex.render(tree, 'latex');
                        console.log(MathLex.render(tree,'sage'))
                    MathJax.Hub.Queue(['Text', mjDisplayBox, latex]);
                } catch (err) {
                    $(this).css('color', 'red');
                }
            } else {
                // clear display and output boxes if input is empty
                MathJax.Hub.Queue(['Text', mjDisplayBox, '']);
                MathJax.Hub.Queue(['Text', mjOutBox, '']);
            }
        });

        // send output to sage server
        // $('#send-math').on('click', function (evt) {
        //     var math = $('#math-input').val();
        //     if (math.length > 0) {
        //         try {
        //             var tree = MathLex.parse(math),
        //                 sageCode = MathLex.render(tree, 'sage');
        //             $.post('http://aleph.sagemath.org/service?callback=?',
        //                     { code: 'print latex('+sageCode+')' }, function (data) {
        //                 // HACK: Firefox does not convert data to JSON
        //                 if (typeof(data) === 'string') { data = $.parseJSON(data); }
        //                 // AJAX success callback
        //                 if (data.success) {
        //                     MathJax.Hub.Queue(['Text', mjOutBox, data.stdout]);
        //                 } else {
        //                     MathJax.Hub.Queue(['Text', mjOutBox, '\\text{Sage could not understand that input}']);
        //                 }
        //             });
        //         } catch (err) {
        //             MathJax.Hub.Queue(['Text', mjOutBox, '\\text{Check your syntax and try again}']);
        //         }
        //     }
        // });
    });
</script>

            </body>
</html>

